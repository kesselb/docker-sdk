version: "3.7"

services:
{% for serviceName, serviceData in services %}
{% set engine = serviceData['engine'] | lower %}
{% set version = serviceData['version'] | default('default') %}
{% set isSharedService = serviceData['shared'] | default(false) %}
{% if  isSharedService == fasle %}
{% include "service/" ~ engine ~ "/" ~ version ~ "/" ~  engine ~ ".yml.twig" with { project: _context, serviceName: serviceName, serviceData: serviceData, engine: engine, version: version } only %}
{% endif %}
{% endfor %}

volumes:
{% for service, serviceData in services %}
{% set isSharedService = serviceData['shared'] | default(false) %}
{% if  isSharedService == false %}
  {{ service }}-{{ serviceData['engine'] }}-data:
      external: false
{% endif %}
{% endfor %}
  ssh-relay:
      external: false
  logs:
      external: false

networks:
    public:
    private:
